Eres un expert full-stack developer especializado en marketplaces B2B. Vas a construir 
PucelaStock, un marketplace B2B industrial local que conecta empresas que necesitan material 
urgente (compradores) con empresas que tienen stock excedente para vender (vendedores).

## CONTEXTO DEL PRODUCTO

PucelaStock resuelve dos problemas cr√≠ticos en pol√≠gonos industriales:

PROBLEMA COMPRADOR (Carlos):
- Necesita material urgente (bomba hidr√°ulica, perfiles acero, rodamientos, etc.) en <24h
- Actualmente: Llama a 8-10 proveedores secuencialmente (90 min desperdiciados)
- Paga sobreprecio 25-60% por urgencia
- No sabe qui√©n en su zona tiene lo que necesita

PROBLEMA VENDEDOR (Elena):
- Tiene 76.000‚Ç¨ de stock obsoleto ocupando almac√©n
- Actualmente: Proceso venta 6-8 semanas por lote (kafkiano)
- Malvende a chatarrero por 20% del valor original
- No tiene canal para llegar a compradores potenciales

SOLUCI√ìN:
Marketplace local B2B donde Elena publica lotes en 12 minutos y Carlos encuentra material 
en 5 minutos, con verificaci√≥n empresas, facturaci√≥n autom√°tica y valoraciones.

---

## MVP SCOPE - 13 FEATURES CORE

Construye un MVP con exactamente estas 13 features (prioridad P0):

### 1. REGISTRO + AUTENTICACI√ìN
**User Story Comprador**:
Como Carlos (Comprador), quiero registrarme con email y datos empresa, para buscar material 
y contactar vendedores, en <5 minutos.

**User Story Vendedor**:
Como Elena (Vendedora), quiero registrarme indicando que soy vendedora, para publicar lotes 
tras verificaci√≥n.

**Specs T√©cnicas**:
- Form registro: Email, Password, Nombre completo, Empresa, CIF (formato espa√±ol)
- Checkbox: "Quiero vender material" (determina rol: comprador/vendedor/ambos)
- Validaci√≥n email: formato + no duplicado
- Validaci√≥n CIF: formato espa√±ol v√°lido (regex: /^[A-Z]\d{8}$|^\d{8}[A-Z]$/)
- Confirmaci√≥n email autom√°tica (link expira 24h)
- Auth con JWT o similar (Firebase Auth, Supabase Auth, etc.)
- Session persistente (remember me)

**UI/UX**:
- Form limpio, m√°ximo 5 campos visibles
- Mensajes error claros ("CIF debe ser formato espa√±ol v√°lido")
- Progress indicator si verificaci√≥n tarda
- Redirect post-registro: Vendedor ‚Üí Verificaci√≥n CIF, Comprador ‚Üí B√∫squeda

---

### 2. VERIFICACI√ìN CIF EMPRESAS
**User Story Vendedor**:
Como Elena, quiero que mi empresa sea verificada autom√°ticamente, para que compradores 
conf√≠en y pueda publicar, obteniendo badge "Empresa Verificada" en <4h.

**User Story Comprador**:
Como Carlos, quiero ver badge "Empresa Verificada" en vendedores, para confiar antes de comprar.

**Specs T√©cnicas**:
- POST-REGISTRO: Si usuario es vendedor, trigger verificaci√≥n CIF
- Verificaci√≥n autom√°tica:
  * Consultar API externa CIF espa√±ola (ej: API AEAT si disponible, sino base datos p√∫blica)
  * Si API no disponible: Marcar "Verificaci√≥n Manual Pendiente", notificar admin
- Badge "Empresa Verificada ‚úì" en:
  * Perfil usuario
  * Ficha producto (junto a nombre vendedor)
  * Listado b√∫squeda
- Tooltip badge: "Verificado por PucelaStock: CIF validado contra registros oficiales"
- Vendedor NO puede publicar lotes hasta verificado
- Email notificaci√≥n cuando verificaci√≥n completa

**UI/UX**:
- Badge verde con checkmark ‚úì
- Si verificaci√≥n pendiente: Banner "Tu cuenta est√° en verificaci√≥n, recibir√°s email en <4h"
- Admin panel: Lista usuarios pendientes verificaci√≥n manual

**Fallback MVP**: Si API AEAT no disponible, TODA verificaci√≥n manual por admin (<4h commitment)

---

### 3. PUBLICACI√ìN LOTE - WIZARD GUIADO
**User Story Vendedor**:
Como Elena, quiero publicar un lote de material en <15 minutos usando wizard guiado, para 
convertir stock en lotes vendibles sin fricci√≥n.

**Specs T√©cnicas - Wizard 5 Pasos**:

**PASO 1 - FOTOS** (obligatorio):
- Upload 1-5 im√°genes (drag & drop)
- Preview antes de siguiente paso
- Validaci√≥n b√°sica: peso <5MB, formato jpg/png/webp
- OPCIONAL MVP: Blur detection (rechazar si muy borrosa)

**PASO 2 - CATEGOR√çA** (obligatorio):
- Select dropdown con 10 categor√≠as:
  * Perfiles de Acero
  * Rodamientos
  * Cables El√©ctricos
  * Bombas Hidr√°ulicas
  * V√°lvulas Industriales
  * Conectores/Torniller√≠a
  * Motores El√©ctricos
  * Material El√©ctrico
  * Tuber√≠a/Fontaner√≠a
  * Otro (especificar)
- OPCIONAL MVP: Sugerencia autom√°tica basada en fotos (IA)

**PASO 3 - DESCRIPCI√ìN** (obligatorio):
- Template pre-llenado seg√∫n categor√≠a seleccionada
- Campos ejemplo para "Perfiles de Acero":
  * Material: [input text] (ej: S275JR)
  * Dimensiones: [textarea] (ej: varios tama√±os, ver fotos)
  * Cantidad: [input text] (ej: 8 pallets, aprox 2.000 kg)
  * Condici√≥n: [radio] Nuevo sin usar / Usado - excelente / Usado - bueno / Para repuestos
  * Origen/Historia: [textarea] (ej: Excedente proyecto cancelado)
- Total caracteres: 150-500 (guiar con contador)

**PASO 4 - PRECIO Y DISPONIBILIDAD** (obligatorio):
- Precio: [input number] ‚Ç¨
- Sugerencia est√°tica: "Material similar en esta categor√≠a se vende entre 40-55% del valor original"
- Checkbox: "Acepto ofertas" (permite negociaci√≥n)
- Disponibilidad: [radio] Recogida inmediata / Entrega (indicar coste) / Ambas
- Ubicaci√≥n: Ciudad autodetectada (geolocalizacion o manual), Direcci√≥n almac√©n (opcional, 
  solo visible post-contacto)

**PASO 5 - REVISAR Y PUBLICAR**:
- Preview completo del lote
- Bot√≥n "Publicar Lote"
- Bot√≥n "Guardar Borrador" (puede volver despu√©s)

**Specs Adicionales**:
- Guardar progreso autom√°tico cada paso (localStorage o DB)
- Navegaci√≥n: Botones "Siguiente", "Anterior", "Guardar y salir"
- Validaci√≥n: No puede avanzar si campos obligatorios vac√≠os
- Post-publicaci√≥n: Confirmaci√≥n "‚úÖ Lote publicado" + link a ficha

**UI/UX**:
- Stepper visual (1‚Üí2‚Üí3‚Üí4‚Üí5)
- Mobile-first (Elena publica desde tablet en almac√©n)
- Instrucciones claras cada paso
- Tiempo estimado: "~12 minutos"

---

### 4. TEMPLATES DESCRIPCI√ìN (10 CATEGOR√çAS)
**Integrado en Feature #3 Paso 3**

Templates espec√≠ficos para cada categor√≠a (campos relevantes precargados):
- Perfiles de Acero: Material, Dimensiones, Cantidad, Condici√≥n, Origen
- Rodamientos: Tipo, Referencia, Di√°metro, Cantidad, Condici√≥n
- Cables: Tipo, Secci√≥n, Longitud, Cantidad, Condici√≥n
- Bombas: Marca, Modelo, Caudal, Presi√≥n, Condici√≥n
- Etc. (crear template para cada una de las 10 categor√≠as)

---

### 5. B√öSQUEDA + FILTROS POTENTES
**User Story Comprador**:
Como Carlos, quiero buscar material urgente con filtros, para encontrar lo que necesito en 
<5 minutos en mi zona.

**Specs T√©cnicas - B√∫squeda**:
- Barra b√∫squeda principal (hero section homepage comprador)
- Search query: Text input, placeholder "ej: bomba hidr√°ulica, perfiles acero, rodamientos..."
- B√∫squeda fuzzy (tolerante a typos: "bomva" ‚Üí "bomba")
- B√∫squeda por:
  * T√≠tulo/nombre lote
  * Descripci√≥n (campos template)
  * Categor√≠a
  * Nombre vendedor
- Enter o bot√≥n "Buscar" ‚Üí Resultados

**Specs T√©cnicas - Filtros** (sidebar o top bar):
- **Categor√≠a**: Multi-select (10 categor√≠as)
- **Ubicaci√≥n**: 
  * Dropdown ciudades pol√≠gonos industriales (ej: Valladolid, Madrid, Barcelona, Bilbao)
  * Radio: 10km / 25km / 50km / 100km / Toda Espa√±a
- **Disponibilidad**:
  * Radio: Disponible hoy / Disponible esta semana / Disponible bajo pedido
- **Precio**:
  * Slider range: 0‚Ç¨ - 50.000‚Ç¨ (o inputs min/max)
- **Condici√≥n**:
  * Checkboxes: Nuevo sin usar / Usado - excelente / Usado - bueno / Para repuestos

**Specs T√©cnicas - Resultados**:
- Grid de cards (3 columnas desktop, 1 m√≥vil)
- Cada card muestra:
  * Foto principal lote
  * T√≠tulo (generado: "{Categor√≠a} - {Descripci√≥n breve}")
  * Precio (grande, bold)
  * Ubicaci√≥n (ciudad + distancia si geoloc habilitada)
  * Disponibilidad (badge "Disponible hoy" verde)
  * Vendedor (nombre empresa + badge verificado)
  * Bot√≥n "Ver Detalles"
- Ordenar por:
  * Relevancia (default)
  * Precio: menor a mayor
  * Precio: mayor a menor
  * Distancia: m√°s cerca primero
  * Fecha publicaci√≥n: m√°s reciente primero
- Paginaci√≥n o infinite scroll
- Mensaje si 0 resultados: "No encontramos lotes con estos criterios. Intenta ampliar filtros 
  o guarda esta b√∫squeda para recibir alertas." (Feature b√∫squedas guardadas es P2, NO en MVP, 
  pero mostrar mensaje preparatorio)

**Performance**:
- Search debe retornar resultados en <1 segundo
- Usar √≠ndices de b√∫squeda (Elasticsearch, Algolia, o search nativo DB si performante)

**UI/UX**:
- Mobile-first
- Filtros colapsables en m√≥vil (hamburger menu)
- Contador resultados: "42 lotes encontrados"
- Highlighting t√©rminos b√∫squeda en resultados

---

### 6. FICHA PRODUCTO DETALLADA
**User Story Ambos**:
Como Carlos, quiero ver todos los detalles del lote antes de contactar, para decidir si me interesa.
Como Elena, quiero que mi lote se vea profesional y completo, para atraer compradores.

**Specs T√©cnicas**:
- URL: `/lote/{id}` o `/lote/{slug}`

**Secciones Ficha**:

**A) GALER√çA FOTOS**:
- Carousel principal (im√°genes grandes)
- Thumbnails navegables
- Zoom on click (modal fullscreen)

**B) INFORMACI√ìN PRINCIPAL** (col derecha):
- T√≠tulo lote (categor√≠a + descripci√≥n breve)
- Precio: Grande, bold (ej: 7.500‚Ç¨)
- Badge disponibilidad: "Disponible para recogida inmediata" (verde)
- Vendedor:
  * Nombre empresa
  * Badge "Empresa Verificada ‚úì"
  * Valoraci√≥n promedio (estrellas) + n¬∫ valoraciones (ej: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 4.8 (12 valoraciones))
  * Link "Ver perfil vendedor"
- Bot√≥n CTA principal: "Contactar Vendedor" (grande, destacado)
- Bot√≥n secundario: "Guardar en Favoritos" (coraz√≥n, opcional MVP)

**C) DESCRIPCI√ìN DETALLADA** (acorde√≥n o tabs):
- Campos del template (ej: Material: S275JR, Dimensiones: [...], etc.)
- Historia/origen del material (textarea del vendedor)

**D) UBICACI√ìN**:
- Ciudad
- "A 25 km de ti" (si geoloc habilitada)
- OPCIONAL: Mapa embebido (Google Maps) mostrando zona general (no direcci√≥n exacta, 
  privacidad)

**E) CONDICIONES**:
- Precio incluye IVA: S√≠/No
- Forma pago aceptada: Transferencia / Efectivo / Ambas
- Recogida / Entrega / Ambas
- Notas adicionales (campo libre vendedor)

**F) VALORACIONES VENDEDOR** (preview):
- √öltimas 3 valoraciones de otros compradores
- Link "Ver todas las valoraciones"

**G) LOTES SIMILARES** (secci√≥n bottom):
- "Otros lotes que podr√≠an interesarte"
- 3-4 lotes misma categor√≠a o mismo vendedor

**UI/UX**:
- Mobile-responsive (col izq fotos, col derecha info en desktop; stack en m√≥vil)
- Breadcrumb: Inicio > B√∫squeda > [Categor√≠a] > [T√≠tulo lote]
- Share buttons (WhatsApp, Email, Copiar link)
- SEO: Meta tags (title, description, og:image)

---

### 7. CHECKOUT B√ÅSICO (CONTACTO VENDEDOR)
**User Story Comprador**:
Como Carlos, quiero contactar al vendedor f√°cilmente, para negociar y coordinar compra.

**Specs T√©cnicas**:
En ficha producto, bot√≥n "Contactar Vendedor" abre modal o nueva p√°gina:

**FORM CONTACTO**:
- Nombre: [prefilled from user profile]
- Empresa: [prefilled]
- Email: [prefilled]
- Tel√©fono: [prefilled o input]
- Mensaje: [textarea]
  * Placeholder: "Hola, estoy interesado en este lote. ¬øEst√° disponible para recogida ma√±ana? 
    ¬øPodemos acordar precio final?"
  * Contador caracteres (min 20, max 500)
- Checkbox: "Enviar copia a mi email"
- Bot√≥n: "Enviar Mensaje"

**BACKEND**:
- Email autom√°tico a vendedor:
  * Asunto: "üîî Nuevo inter√©s en tu lote: [T√≠tulo lote]"
  * Contenido:
    - "[Nombre comprador] de [Empresa comprador] est√° interesado en tu lote."
    - Mensaje del comprador
    - Datos contacto comprador (email, tel√©fono)
    - Link directo a lote
    - CTA: "Responder a [email comprador]"
- Email confirmaci√≥n a comprador:
  * "Hemos enviado tu mensaje a [Vendedor]. Te responder√°n pronto a [tu email]."
- Registrar evento en DB:
  * Tabla "consultas" o "leads": lote_id, comprador_id, vendedor_id, mensaje, timestamp
  * Estado: "Enviado" (para futuras analytics)

**OPCIONAL MVP** (si tiempo):
- Notificaci√≥n in-app a vendedor (badge "1 nuevo mensaje")
- Chat b√°sico in-app (pero email suficiente para MVP seg√∫n an√°lisis)

**UI/UX**:
- Modal overlay (no redirigir a nueva p√°gina, mantener contexto)
- Validaci√≥n: No vac√≠o, email v√°lido, tel√©fono formato v√°lido
- Loading state al enviar
- Success message: "‚úÖ Mensaje enviado. [Vendedor] recibir√° tu mensaje por email."
- Error handling: "‚ùå Error enviando mensaje. Intenta de nuevo."

**IMPORTANTE**: Este es el equivalente a "checkout" en MVP. NO hay pago integrado en plataforma 
en MVP. Comprador y vendedor coordinan pago (transferencia directa) y entrega por email
